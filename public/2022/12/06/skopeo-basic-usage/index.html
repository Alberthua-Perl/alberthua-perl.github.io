<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ä¸–ç•Œï¼ğŸ’ª | Thumbs Up for Cloud Native ğŸ¤˜">
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          Skopeo é•œåƒå·¥å…·ä¸å®¹å™¨é•œåƒæ ¼å¼çš„åŸç†ä¸ä½¿ç”¨ - Alberthua çš„åšå®¢ | Alberthua&#39;s Blog
        
    </title>

    <link rel="canonical" href="https://alberthua-perl.github.io/2022/12/06/skopeo-basic-usage/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Alberthua Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archives/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="https://alberthua-perl.github.io/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('skopeo-bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#äº‘åŸç”Ÿ" title="äº‘åŸç”Ÿ">äº‘åŸç”Ÿ</a>
                        
                          <a class="tag" href="/tags/#å®¹å™¨" title="å®¹å™¨">å®¹å™¨</a>
                        
                    </div>
                    <h1>Skopeo é•œåƒå·¥å…·ä¸å®¹å™¨é•œåƒæ ¼å¼çš„åŸç†ä¸ä½¿ç”¨</h1>
                    <h2 class="subheading">Skopeo Basic Usage and Container Image Format</h2>
                    <span class="meta">
                        Posted by Alberthua on
                        2022-12-06
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h3 id="æ–‡æ¡£è¯´æ˜ï¼š"><a href="#æ–‡æ¡£è¯´æ˜ï¼š" class="headerlink" title="æ–‡æ¡£è¯´æ˜ï¼š"></a>æ–‡æ¡£è¯´æ˜ï¼š</h3><ul>
<li>OS ç‰ˆæœ¬ï¼šUbuntu 20.04.3 LTS (Focal Fossa)</li>
<li>skopeo ç‰ˆæœ¬ï¼š1.3.0-1</li>
</ul>
<h3 id="æ–‡æ¡£ç›®å½•ï¼š"><a href="#æ–‡æ¡£ç›®å½•ï¼š" class="headerlink" title="æ–‡æ¡£ç›®å½•ï¼š"></a>æ–‡æ¡£ç›®å½•ï¼š</h3><ul>
<li>Skopeo å·¥å…·æ¦‚è¦</li>
<li>ä½¿ç”¨ Skopeo è®¤è¯å®¹å™¨é•œåƒä»“åº“</li>
<li>Skopeo æ”¯æŒçš„å®¹å™¨é•œåƒå­˜å‚¨æ–¹å¼</li>
<li>ä½¿ç”¨ Skopeo æ“ä½œå®¹å™¨é•œåƒ</li>
<li>å®¹å™¨é•œåƒæ ¼å¼æ¯”è¾ƒ</li>
<li>å‚è€ƒé“¾æ¥</li>
</ul>
<h3 id="Skopeo-å·¥å…·æ¦‚è¦ï¼š"><a href="#Skopeo-å·¥å…·æ¦‚è¦ï¼š" class="headerlink" title="Skopeo å·¥å…·æ¦‚è¦ï¼š"></a>Skopeo å·¥å…·æ¦‚è¦ï¼š</h3><ul>
<li>å¸¸ç”¨çš„å®¹å™¨é•œåƒæ“ä½œå·¥å…·å¯ä½¿ç”¨ dockerã€podman å‘½ä»¤ï¼Œä½† docker å‘½ä»¤è¡Œå·¥å…·éœ€è¦ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹ä¸ root ç”¨æˆ·æƒé™ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ä½¿ç”¨è¯¥å·¥å…·åŒæ­¥å®¹å™¨é•œåƒçš„æ•ˆç‡æ˜¯è¾ƒä½çš„ï¼Œè€Œ podman å‘½ä»¤è™½ç„¶ä¸ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹ï¼Œä½†æ˜¯å…¶åŒæ­¥é•œåƒæ•ˆç‡ä¾ç„¶ä¸é«˜ã€‚</li>
<li>skopeo ä¸ buildah å‘½ä»¤å¯ä¸“é—¨ç”¨äºå®¹å™¨é•œåƒçš„æ“ä½œï¼Œå…¶ä¸­ skopeo å‘½ä»¤æ›´åŠ çº¯ç²¹åœ°ç”¨äºå®¹å™¨é•œåƒçš„æ¬è¿ä¸å®¹å™¨é•œåƒæ ¼å¼çš„è½¬æ¢ï¼Œæ•ˆç‡è¾ƒå…¶ä»–å·¥å…·æ›´é«˜ï¼Œä½†æ˜¯ä¸å…·æœ‰å®¹å™¨é•œåƒæ„å»ºçš„èƒ½åŠ›ã€‚</li>
<li>Podman æ›´åŠ ä¾§é‡äºå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒæ—¶å…·å¤‡éƒ¨åˆ†å®¹å™¨é•œåƒç®¡ç†ä¸æ„å»ºåŠŸèƒ½ï¼Œè€Œ Buildah æ”¯æŒåˆ†åˆ«ä½¿ç”¨å‘½ä»¤è¡Œä»å¤´æ„å»ºå®¹å™¨é•œåƒä¸ <code>Dockerfile</code> æˆ– <code>Containerfile</code> çš„æ„å»ºæ–¹å¼ï¼ŒåŒæ—¶å…¼å®¹ Docker ä¸ OCI é•œåƒæ ¼å¼ã€‚<blockquote>
<p>ğŸ‘‰ å…³äº Podman æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯å¯å‚è€ƒä¹‹å‰å†™çš„ <a href="https://alberthua-perl.github.io/2022/12/05/podman-arch-usage/">Podman å®¹å™¨åŸç†ä¸ä½¿ç”¨ï¼ˆ1ï¼‰</a>ä¸ <a href="https://alberthua-perl.github.io/2022/12/05/podman-usage-practice/">Podman å®¹å™¨åŸç†ä¸ä½¿ç”¨ï¼ˆ2ï¼‰</a>ã€‚</p>
</blockquote>
</li>
<li>Skopeo å®‰è£…æ–¹æ³•å¯å‚è€ƒ <a href="https://github.com/containers/skopeo/blob/main/install.md" target="_blank" rel="noopener">è¯¥ GitHub é“¾æ¥</a>ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</li>
<li>skopeo å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo --<span class="built_in">help</span></span><br><span class="line">Various operations with container images and container image registries</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  skopeo [<span class="built_in">command</span>]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  copy                                          Copy an IMAGE-NAME from one location to another</span><br><span class="line">  delete                                        Delete image IMAGE-NAME</span><br><span class="line">  <span class="built_in">help</span>                                          Help about any <span class="built_in">command</span></span><br><span class="line">  inspect                                       Inspect image IMAGE-NAME</span><br><span class="line">  list-tags                                     List tags <span class="keyword">in</span> the transport/repository specified by the REPOSITORY-NAME</span><br><span class="line">  login                                         Login to a container registry</span><br><span class="line">  <span class="built_in">logout</span>                                        Logout of a container registry</span><br><span class="line">  manifest-digest                               Compute a manifest digest of a file</span><br><span class="line">  standalone-sign                               Create a signature using <span class="built_in">local</span> files</span><br><span class="line">  standalone-verify                             Verify a signature using <span class="built_in">local</span> files</span><br><span class="line">  sync                                          Synchronize one or more images from one location to another</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">      --<span class="built_in">command</span>-timeout duration   timeout <span class="keyword">for</span> the <span class="built_in">command</span> execution</span><br><span class="line">      --debug                      <span class="built_in">enable</span> debug output</span><br><span class="line">  -h, --<span class="built_in">help</span>                       <span class="built_in">help</span> <span class="keyword">for</span> skopeo</span><br><span class="line">      --insecure-policy            run the tool without any policy check</span><br><span class="line">      --override-arch ARCH         use ARCH instead of the architecture of the machine <span class="keyword">for</span> choosing images</span><br><span class="line">      --override-os OS             use OS instead of the running OS <span class="keyword">for</span> choosing images</span><br><span class="line">      --override-variant VARIANT   use VARIANT instead of the running architecture variant <span class="keyword">for</span> choosing images</span><br><span class="line">      --policy string              Path to a trust policy file</span><br><span class="line">      --registries.d DIR           use registry configuration files <span class="keyword">in</span> DIR (e.g. <span class="keyword">for</span> container signature storage)</span><br><span class="line">      --tmpdir string              directory used to store temporary files</span><br><span class="line">  -v, --version                    Version <span class="keyword">for</span> Skopeo</span><br><span class="line"></span><br><span class="line">Use <span class="string">"skopeo [command] --help"</span> <span class="keyword">for</span> more information about a <span class="built_in">command</span>.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="ä½¿ç”¨-Skopeo-è®¤è¯å®¹å™¨é•œåƒä»“åº“ï¼š"><a href="#ä½¿ç”¨-Skopeo-è®¤è¯å®¹å™¨é•œåƒä»“åº“ï¼š" class="headerlink" title="ä½¿ç”¨ Skopeo è®¤è¯å®¹å™¨é•œåƒä»“åº“ï¼š"></a>ä½¿ç”¨ Skopeo è®¤è¯å®¹å™¨é•œåƒä»“åº“ï¼š</h3><ul>
<li>Red Hat æ”¯æŒ <code>skopeo</code> å‘½ä»¤æ¥ç®¡ç†å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒã€‚</li>
<li>Skopeo å¯åˆ†åˆ«ç”¨äºæ“ä½œå…¬å…±ï¼ˆpublicï¼‰ä¸ç§æœ‰ï¼ˆprivateï¼‰å®¹å™¨é•œåƒï¼Œå¯¹äºç§æœ‰å®¹å™¨é•œåƒéœ€è¦å¯¹å®¹å™¨é•œåƒä»“åº“è¿›è¡Œè®¤è¯ã€‚</li>
<li>Skopeo ä¸ Buildah å¯ä½¿ç”¨ Podman ä¿å­˜çš„è®¤è¯ <code>token</code>ï¼ˆä½äº <code>/run/user/&lt;UID&gt;/containers/auth.json</code>ï¼‰ï¼Œä½†æ˜¯æ— æ³•æ‰§è¡Œäº¤äº’å¼çš„ç™»å½•å¯†ç è¾“å…¥ï¼Œå› æ­¤ï¼Œè‹¥åœ¨ skopeo å‘½ä»¤è¡Œä¸­æŒ‡å®šæ˜æ–‡ç™»å½•å¯†ç å¯åœ¨ history å‘½ä»¤å†å²è®°å½•ä¸­æŸ¥çœ‹åˆ°ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹ä»¥å˜é‡å½¢å¼ä¼ é€’å¯†ç çš„æ–¹æ³•ä¼˜åŒ–ï¼š<img src="skopeo-inspect-creds.jpg" alt="skopeo-inspect-creds.jpg"><blockquote>
<p>è‹¥æœªä½¿ç”¨ Podman ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ï¼Œè€Œä¾ç„¶ä½¿ç”¨ Docker å®¹å™¨è¿è¡Œæ—¶çš„è¯ï¼Œå…¶è®¤è¯ token ä¾ç„¶å¯è¢« Skopeo ä½¿ç”¨ä¸è®¤è¯ï¼Œè¯¥è®¤è¯ token ä½äº <code>$HOME/.docker/config.json</code>ã€‚</p>
</blockquote>
</li>
<li>Skopeo çš„ä¼—å¤šå­å‘½ä»¤æ”¯æŒå®¹å™¨é•œåƒä»“åº“çš„è®¤è¯ï¼Œå¯åˆ†åˆ«é€šè¿‡ç”¨æˆ·åä¸å¯†ç åŠè®¤è¯çš„ token æ–‡ä»¶å®ç°è®¤è¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ç¤ºä¾‹ ###</span></span><br><span class="line">$ skopeo copy --src-creds &lt;username&gt;:&lt;password&gt; \</span><br><span class="line">  docker://registry.redhat.io/rhscl/postgresql-96-rhel7:latest \</span><br><span class="line">  oci:postgresql-96-rhel7-latest</span><br><span class="line"></span><br><span class="line">$ skopeo copy --src-authfile /run/user/&lt;UID&gt;/containers/auth.json \</span><br><span class="line">  docker://registry.redhat.io/rhscl/postgresql-96-rhel7:latest \</span><br><span class="line">  oci:postgresql-96-rhel7-latest</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Skopeo-æ”¯æŒçš„å®¹å™¨é•œåƒå­˜å‚¨æ–¹å¼ï¼š"><a href="#Skopeo-æ”¯æŒçš„å®¹å™¨é•œåƒå­˜å‚¨æ–¹å¼ï¼š" class="headerlink" title="Skopeo æ”¯æŒçš„å®¹å™¨é•œåƒå­˜å‚¨æ–¹å¼ï¼š"></a>Skopeo æ”¯æŒçš„å®¹å™¨é•œåƒå­˜å‚¨æ–¹å¼ï¼š</h3><ul>
<li>Skopeo ä½¿ç”¨ <code>URI</code> æ¥è¡¨ç¤ºå®¹å™¨é•œåƒçš„ä½ç½®ï¼Œä½¿ç”¨ URI æ¨¡å¼ï¼ˆschemaï¼‰æ¥è¡¨ç¤ºå®¹å™¨é•œåƒæ ¼å¼å’Œregistry APIsã€‚</li>
<li>å¸¸è§çš„ URI æ¨¡å¼ï¼š  <ul>
<li><code>oci</code>ï¼š    <ul>
<li>è¡¨ç¤ºå­˜å‚¨åœ¨æœ¬åœ°çš„ OCI æ ¼å¼ç›®å½•ä¸­çš„å®¹å™¨é•œåƒ    </li>
<li>è¯¥é•œåƒå…¼å®¹å¼€æ”¾å®¹å™¨é•œåƒå±‚è§„èŒƒï¼ˆ<code>Open Container Image Layout Specification</code>ï¼‰  </li>
</ul>
</li>
<li><code>oci-archive</code>ï¼š    <ul>
<li>è¡¨ç¤º OCI é•œåƒæ ¼å¼å°è£…çš„å®¹å™¨é•œåƒçš„ tar å½’æ¡£    </li>
<li>è¯¥é•œåƒå…¼å®¹å¼€æ”¾å®¹å™¨é•œåƒå±‚è§„èŒƒ  </li>
</ul>
</li>
<li><code>containers-storage</code>ï¼š    <ul>
<li>è¡¨ç¤ºå­˜å‚¨äºæœ¬åœ°å®¹å™¨è¿è¡Œæ—¶ç¼“å­˜ä¸­çš„å®¹å™¨é•œåƒ    </li>
<li>åç«¯å®¹å™¨å¼•æ“å…¼å®¹ Podmanã€CRI-O ä¸ Buildah  </li>
</ul>
</li>
<li><code>docker-daemon</code>ï¼š    <ul>
<li>è¡¨ç¤ºå­˜å‚¨äºæœ¬åœ° Docker å®¹å™¨è¿è¡Œæ—¶ç¼“å­˜ä¸­çš„å®¹å™¨é•œåƒ  </li>
</ul>
</li>
<li><code>docker-archive</code>ï¼š    <ul>
<li>è¡¨ç¤º Docker é•œåƒæ ¼å¼å°è£…çš„å®¹å™¨é•œåƒçš„ tar å½’æ¡£  </li>
</ul>
</li>
<li><code>dir</code>ï¼š    <ul>
<li>æœ¬åœ°å­˜å‚¨å®¹å™¨é•œåƒçš„ç›®å½•ï¼Œå…¶ä¸­ä»¥å•ä¸ªæ–‡ä»¶çš„æ–¹å¼åŒ…å«é•œåƒçš„ <code>manifest</code>ã€é•œåƒå±‚ tar å½’æ¡£ä¸å„é•œåƒå±‚ç­¾åï¼ˆ<code>digest</code>ï¼‰ã€‚  </li>
</ul>
</li>
<li><code>docker://</code>ï¼š    <ul>
<li>è¡¨ç¤ºå­˜å‚¨äºå®¹å™¨é•œåƒä»“åº“ä¸­çš„è¿œç¨‹å®¹å™¨é•œåƒ</li>
<li>å¯é€šè¿‡ <code>Docker Registry HTTP API V2</code> æ“ä½œä»“åº“ä¸­çš„å®¹å™¨é•œåƒ</li>
</ul>
</li>
</ul>
</li>
<li>åŒä¸€å®¹å™¨é•œåƒå¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯ä½¿ç”¨ä»¥ä¸Šä¸åŒçš„æ–¹å¼ä¿å­˜ã€‚<blockquote>
<p>ğŸ‘‰ å…³äº Skopeo æ›´ä¸ºè¯¦ç»†çš„ä¿¡æ¯å¯å‚è€ƒ <code>man skopeo</code> æ‰‹å†Œã€‚</p>
</blockquote>
</li>
</ul>
<h3 id="ä½¿ç”¨-Skopeo-æ“ä½œå®¹å™¨é•œåƒï¼š"><a href="#ä½¿ç”¨-Skopeo-æ“ä½œå®¹å™¨é•œåƒï¼š" class="headerlink" title="ä½¿ç”¨ Skopeo æ“ä½œå®¹å™¨é•œåƒï¼š"></a>ä½¿ç”¨ Skopeo æ“ä½œå®¹å™¨é•œåƒï¼š</h3><ul>
<li>Skopeo ä¸ä½¿ç”¨å®¹å™¨è¿è¡Œæ—¶ï¼Œå¹¶ä¸”æ™®é€šç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨ï¼Œæ¯” Podman ä½¿ç”¨ tagã€pull ä¸ push ç­‰å­å‘½ä»¤æ—¶æ›´åŠ çš„é«˜æ•ˆã€‚</li>
<li>ğŸ³ è‹¥ä½¿ç”¨ docker æˆ– podman å‘½ä»¤å°†å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒä¿å­˜äºæœ¬åœ°å­˜å‚¨ï¼Œéœ€åˆ†åˆ«ä½¿ç”¨ docker pull|save ä¸ podman pull|save å‘½ä»¤å°†æœ¬åœ°é•œåƒç¼“å­˜ä¸­çš„é•œåƒä¿å­˜äº tar å½’æ¡£ï¼Œæ— æ³•ä»å®¹å™¨é•œåƒä»“åº“ç›´æ¥ä¿å­˜äºæ–‡ä»¶æˆ–ç›®å½•ä¸­ï¼Œä¸‹æ–‡ä¸­æåŠçš„ <code>skopeo copy</code> æˆ– <code>sync</code> å­å‘½ä»¤å¯å®ç°è¯¥åŠŸèƒ½ï¼Œæ— éœ€å­˜åœ¨æœ¬åœ°é•œåƒç¼“å­˜ã€‚</li>
<li><p>ğŸš€ Skopeo æ“çºµé•œåƒå±‚çš„æ–¹å¼ï¼š  </p>
<ul>
<li>å‡ºäºæ•ˆç‡é—®é¢˜ï¼ŒSkopeo ä¸è¯»å–ä¸å‘é€å·²å­˜åœ¨äºç›®æ ‡ä»“åº“çš„é•œåƒå±‚ï¼Œå®ƒé¦–å…ˆè¯»å–æºé•œåƒçš„ manifestï¼Œå†ç¡®å®šå“ªäº›å±‚å·²å­˜åœ¨äºç›®æ ‡ä»“åº“ï¼Œç„¶åä»…ä»…æ‹·è´ç¼ºå¤±çš„é•œåƒå±‚ã€‚  </li>
<li>è‹¥æ‹·è´æ¥è‡ªæ„å»ºäºåŒä¸€çˆ¶é•œåƒçš„é•œåƒï¼ŒSkopeo ä¸æ‹·è´å¤šä¸ªæ¥è‡ªäºçˆ¶é•œåƒçš„ç›¸åŒé•œåƒå±‚ã€‚  </li>
<li><p>Skopeo å¯åœ¨å®¹å™¨é•œåƒä»“åº“ä¹‹é—´æ‹·è´é•œåƒè€Œä¸åœ¨æœ¬åœ°å®¹å™¨å­˜å‚¨ä¸­ä¿å­˜é•œåƒå±‚ç¼“å­˜ï¼Œè‹¥æºä»“åº“ä¸ç›®æ ‡ä»“åº“éœ€è¦è®¤è¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨ <code>--src-creds</code> ä¸ <code>--dest-creds</code> é€‰é¡¹æŒ‡å®šè®¤è¯ç”¨æˆ·ä¸æ˜æ–‡å¯†ç ï¼Œå¹¶ä¸” Skopeo æ”¯æŒåœ¨ç›®æ ‡ä»“åº“å®ç°é•œåƒ <code>tag</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  --src-creds=&lt;username&gt;:&lt;password&gt; \</span><br><span class="line">  --dest-creds=&lt;username&gt;:&lt;password&gt; \</span><br><span class="line">  docker://&lt;uri_for_src_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  docker://&lt;uri_for_dest_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag]</span><br><span class="line"><span class="comment"># åˆ†åˆ«æŒ‡å®šæºä»“åº“ä¸ç›®æ ‡ä»“åº“çš„è®¤è¯ç”¨æˆ·ä¸æ˜æ–‡å¯†ç ï¼Œå¹¶åœ¨ä»“åº“é—´æ‹·è´å®¹å™¨é•œåƒã€‚</span></span><br></pre></td></tr></table></figure>
<p><img src="skopeo-copy-dest-creds.jpg" alt="skopeo-copy-dest-creds.jpg"></p>
</li>
</ul>
</li>
<li><p><code>skopeo delete</code>ï¼šåˆ é™¤å®¹å™¨é•œåƒçš„é•œåƒ tag  </p>
<ul>
<li><p>è¯¥å‘½ä»¤å¯åˆ é™¤å®¹å™¨é•œåƒä»“åº“ä¸­æŒ‡å®šé•œåƒçš„ tag<br>è‹¥åˆ é™¤å…¬å…±é•œåƒå¯ç›´æ¥æ‰§è¡Œæ— éœ€ç”¨æˆ·è®¤è¯ï¼Œè€Œåˆ é™¤ç§æœ‰å®¹å™¨é•œåƒéœ€ä½¿ç”¨ <code>--creds</code> é€‰é¡¹æˆ– <code>--authfile</code> é€‰é¡¹è¿›è¡Œè®¤è¯ååˆ é™¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo delete --creds &lt;username&gt;:&lt;password&gt; \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag]</span><br></pre></td></tr></table></figure>
</li>
<li><p>ğŸ’¥ æŒ‡å®šé•œåƒ <code>tag</code> æ—¶å°†åˆ é™¤ç‰¹å®š tagï¼Œå³ä½¿å°†æœ€åä¸€ä¸ª tag åˆ é™¤åä¹Ÿä¸åˆ é™¤æ•´ä¸ªé•œåƒä»“åº“ï¼Œè‹¥éœ€è¦åˆ é™¤æ•´ä¸ªé•œåƒä»“åº“éœ€ç™»å½•æŒ‡å®šä»“åº“ã€‚æ­¤å¤„ä¸º Quay.io ä¸ºä¾‹ï¼Œåœ¨ <code>Web æ§åˆ¶å°</code> ä¸Šåˆ é™¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<img src="skopeo-delete-1.jpg" alt="skopeo-delete-1.jpg"><img src="skopeo-delete-2.jpg" alt="skopeo-delete-2.jpg"> </p>
</li>
<li>ğŸ’¥ è¯¥å‘½ä»¤ä¹Ÿå¯åˆ é™¤æœ¬åœ°å®¹å™¨è¿è¡Œæ—¶ç¼“å­˜ä¸­çš„é•œåƒ tagï¼Œä½†éœ€æ³¨æ„ï¼Œè‹¥å…·æœ‰å¤šä¸ªä¸åŒ tag çš„å®¹å™¨é•œåƒï¼ˆå®é™…ä¸ºåŒä¸€å®¹å™¨é•œåƒï¼‰ï¼Œåªå…·æœ‰åŒä¸€ä¸ª image IDï¼ˆè¯¥å€¼æ¥è‡ªäºé•œåƒçš„ manifest ä¸­ <code>.config.digest</code>ï¼‰ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œåˆ é™¤æ—¶å³ä½¿æŒ‡å®šäº†é•œåƒçš„ tagï¼Œä¹Ÿä¼šå°†å…¶ä»–å…·æœ‰ç›¸åŒ image ID çš„é•œåƒä¸€å¹¶åˆ é™¤ï¼Œè¯¥è¡Œä¸ºä¸å®¹å™¨é•œåƒä»“åº“ä¸­ç›¸åŒºåˆ«ï¼</li>
</ul>
</li>
<li><p><code>skopeo copy</code>ï¼šdir æ¨¡å¼ç¤ºä¾‹</p>
<blockquote>
<p>ğŸ’¥ Skopeo å¯å°†å®¹å™¨é•œåƒä»“åº“ä¸­é•œåƒæ‹·è´è‡³æœ¬åœ°é•œåƒç›®å½•ï¼ˆè¯¥ç›®å½•æ— éœ€æå‰åˆ›å»ºï¼‰ï¼Œè¯¥ç›®å½•ä¸­çš„é•œåƒå°è£…æ ¼å¼ä¿ç•™åŸå§‹å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒæ ¼å¼ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  dir:&lt;dir_of_container_image&gt;</span><br></pre></td></tr></table></figure>
<p><img src="skopeo-copy-docker-format-image-dir.jpg" alt="skopeo-copy-docker-format-image-dir.jpg">é™¤äº†ä½¿ç”¨ docker load æˆ– podman load ç›´æ¥å°†å®¹å™¨é•œåƒçš„ tar å½’æ¡£å¯¼å…¥æœ¬åœ°é•œåƒç¼“å­˜ä¸­ï¼Œä¹Ÿå¯ä½¿ç”¨å·²ç»ä¿å­˜è‡³æœ¬åœ°çš„ç›®å½•ä»¥ dir æˆ– oci æ¨¡å¼å­˜åœ¨çš„å®¹å™¨é•œåƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<img src="podman-load-dir-from-skopeo-copy.jpg" alt="podman-load-dir-from-skopeo-copy.jpg"></p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Skopeo å°†æœ¬åœ°é•œåƒç›®å½•æ‹·è´è‡³å®¹å™¨é•œåƒä»“åº“ï¼Œç”¨ä»¥æ›¿ä»£ docker push æˆ– podman push çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  dir:&lt;dir_of_container_image&gt; \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag]</span><br></pre></td></tr></table></figure>
<p><img src="skopeo-copy-dir-2.jpg" alt="skopeo-copy-dir-2.jpg"></p>
</li>
<li><p><code>skopeo copy</code>ï¼šoci æ¨¡å¼ç¤ºä¾‹<br>Skopeo å¯å°†å®¹å™¨é•œåƒä»“åº“ä¸­é•œåƒæ‹·è´è‡³æœ¬åœ° <code>OCI</code> æ ¼å¼ç›®å½•ä¸­ä»¥å­˜å‚¨é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  oci:&lt;dir_of_container_image&gt;</span><br></pre></td></tr></table></figure>
<p><img src="skopeo-copy-oci-1.jpg" alt="skopeo-copy-oci-1.jpg">å…¶ä¸­æ‹·è´è‡³æœ¬åœ°çš„ OCI æ ¼å¼ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼ŒåŒ…å«äº†å®¹å™¨é•œåƒçš„å„å±‚ï¼ˆlayerï¼‰ã€‚<br><img src="skopeo-copy-oci-2.jpg" alt="skopeo-copy-oci-2.jpg">ä¹Ÿå¯ä½¿ç”¨æœ¬åœ° OCI æ ¼å¼ç›®å½•å°†é•œåƒæ‹·è´è‡³å®¹å™¨é•œåƒä»“åº“ä¸­ã€‚</p>
</li>
<li><p><code>skopeo copy</code>ï¼šoci-archive æ¨¡å¼ç¤ºä¾‹  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  oci-archive:&lt;oci_contaier_image_name&gt;.tar</span><br><span class="line"><span class="comment"># å°†å®¹å™¨é•œåƒä»“åº“ä¸­é•œåƒå°è£…ä¸º tar å½’æ¡£çš„ OCI é•œåƒæ ¼å¼çš„é•œåƒ</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>skopeo copy</code>ï¼šcontainers-storage æ¨¡å¼ç¤ºä¾‹  </p>
<blockquote>
<p>ğŸ’¥ è¯¥æ¨¡å¼åªèƒ½åœ¨ä»¥ Podman æˆ– CRI-O ä¸ºå®¹å™¨è¿è¡Œæ—¶çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè‹¥ä½¿ç”¨ Docker å®¹å™¨è¿è¡Œæ—¶å°†æŠ¥é”™ï¼</p>
</blockquote>
<p><img src="skopeo-copy-docker-daemon.jpg" alt="skopeo-copy-docker-daemon.jpg">  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  containers-storage:&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag]</span><br><span class="line"><span class="comment"># å°†å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒå­˜å‚¨äºæœ¬åœ°é•œåƒç¼“å­˜</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>skopeo copy</code>ï¼šdocker-archive æ¨¡å¼ç¤ºä¾‹  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  docker-archive:&lt;docker_contaier_image_name&gt;.tar</span><br><span class="line"><span class="comment"># å°†å®¹å™¨é•œåƒä»“åº“ä¸­é•œåƒå°è£…ä¸º tar å½’æ¡£çš„ Docker é•œåƒæ ¼å¼çš„é•œåƒ</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>skopeo copy</code>ï¼šdocker-daemon æ¨¡å¼ç¤ºä¾‹</p>
<blockquote>
<p>ğŸ’¥ è¯¥æ¨¡å¼åœ¨ä½¿ç”¨ Docker å®¹å™¨è¿è¡Œæ—¶çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo copy \</span><br><span class="line">  docker://&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag] \</span><br><span class="line">  docker-daemon:&lt;uri_for_registry&gt;/&lt;user_or_org&gt;/&lt;repository&gt;:[tag]</span><br><span class="line"><span class="comment"># å°†å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒå­˜å‚¨äºæœ¬åœ°é•œåƒç¼“å­˜</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ğŸš€ Skopeo å¯¹å®¹å™¨é•œåƒæ ¼å¼çš„è½¬æ¢ï¼š  </p>
<ul>
<li>ä½¿ç”¨ skopeo copy å‘½ä»¤å°†å®¹å™¨é•œåƒä»“åº“ä¸­é•œåƒæ‹·è´è‡³æœ¬åœ°ç›®å½•æˆ–æœ¬åœ° tar å½’æ¡£å­˜å‚¨æ—¶ï¼Œå¯åˆ†åˆ«ä»¥ Docker é•œåƒæ ¼å¼æˆ– OCI é•œåƒæ ¼å¼ä¿å­˜ã€‚  </li>
<li>å› æ­¤ï¼Œskopeo copy å‘½ä»¤å¯åŒæ—¶å®Œæˆå®¹å™¨é•œåƒçš„ä¸‹è½½ä¸é•œåƒæ ¼å¼çš„è½¬æ¢ã€‚  </li>
<li>å¦‚ä¸‹æ‰€ç¤ºï¼š<img src="skopeo-copy-transform-image-format.jpg" alt="skopeo-copy-transform-image-format.jpg"></li>
</ul>
</li>
<li><code>skopeo sync</code>ï¼š  <ul>
<li>sync å­å‘½ä»¤å°†å®¹å™¨é•œåƒä» src æºåŒæ­¥è‡³ dest ç›®çš„åœ°ï¼ŒåŠŸèƒ½ä¸ copy å­å‘½ä»¤ç±»ä¼¼ã€‚  </li>
<li>skopeo sync å‘½ä»¤å¯æŒ‡å®šçš„ src ä¸ dest ç±»å‹å¦‚ä¸‹æ‰€ç¤ºï¼š<img src="skopeo-sync-help.jpg" alt="skopeo-sync-help.jpg"></li>
<li>ğŸ‘‰ ç¤ºä¾‹ 1ï¼š<br>å°†è¿œç¨‹å®¹å™¨é•œåƒä»“åº“ä¸­çš„é•œåƒåŒæ­¥è‡³æœ¬åœ°ç›®å½•ï¼Œæœ¬åœ°å­˜å‚¨å®¹å™¨é•œåƒçš„ç›®å½•æ— éœ€åˆ›å»ºã€‚<img src="skopeo-sync-demo.jpg" alt="skopeo-sync-demo.jpg"></li>
<li>ğŸ‘‰ ç¤ºä¾‹ 2ï¼š<br>skopeo å‘½ä»¤åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªå®¹å™¨é•œåƒä»“åº“çš„ token è®¤è¯æ–‡ä»¶å°†å®¹å™¨é•œåƒåŒæ­¥è‡³å¦ä¸€ä¸ªä»“åº“ä¸­ï¼Œå¹¶ä¸”ç›®æ ‡ä»“åº“åªéœ€æŒ‡å®šä»“åº“ <code>URI</code> å³å¯ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„é•œåƒåç§°ä¸æ ‡ç­¾ã€‚<img src="skopeo-sync-between-registry.jpg" alt="skopeo-sync-between-registry.jpg"></li>
<li>ä¹Ÿå¯ä½¿ç”¨ skopeo sync å‘½ä»¤å°†æœ¬åœ° dir æ¨¡å¼å­˜å‚¨çš„å®¹å™¨é•œåƒåŒæ­¥è‡³è¿œç¨‹å®¹å™¨é•œåƒä»“åº“ä¸­ã€‚</li>
</ul>
</li>
<li><p><code>skopeo inspect</code> ä¸ <code>skopeo manifest-digest</code>ï¼š</p>
<ul>
<li>è¯¥å‘½ä»¤ç”¨äºæŸ¥çœ‹è¯¦ç»†çš„å®¹å™¨é•œåƒå±‚ä¿¡æ¯ï¼ˆimage manifestï¼‰æˆ–å®¹å™¨é•œåƒçš„é…ç½®ä¿¡æ¯ï¼ˆimage configï¼‰ã€‚  </li>
<li>ğŸ³ image manifest åŒ…å«å„é•œåƒå±‚çš„ <code>mediaType</code>ã€<code>size</code>ã€<code>digest</code>ï¼Œè€Œ image config åŒ…å«é•œåƒçš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ã€‚  </li>
<li><p>ğŸ‘‰ ç¤ºä¾‹ 1ï¼šDocker é•œåƒæ ¼å¼çš„å®¹å™¨é•œåƒç›®å½•<br>å¦‚ä¸Šæ‰€è¿°ï¼Œä½¿ç”¨ <code>dir</code> æ¨¡å¼å­˜å‚¨çš„å®¹å™¨é•œåƒä½äº nexus3-3.37.3 ç›®å½•ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨ <code>jq</code> å‘½ä»¤æŸ¥çœ‹è¯¥é•œåƒçš„ image manifest ä¸ image configï¼š    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### ç¤ºä¾‹ï¼ˆä»¥ä¸‹å†…å®¹ä¸ºéƒ¨åˆ†è¾“å‡ºï¼‰ ###</span></span><br><span class="line">$ jq <span class="string">'.'</span> nexus3-3.37.3/manifest.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"schemaVersion"</span>: 2,</span><br><span class="line">  <span class="string">"mediaType"</span>: <span class="string">"application/vnd.docker.distribution.manifest.v2+json"</span>,</span><br><span class="line">  <span class="string">"config"</span>: &#123;</span><br><span class="line">    <span class="string">"mediaType"</span>: <span class="string">"application/vnd.docker.container.image.v1+json"</span>,</span><br><span class="line">    <span class="string">"size"</span>: 10193,</span><br><span class="line">    <span class="string">"digest"</span>: <span class="string">"sha256:1e1d45f195b19d03ec1833561dca6f5c63f9453413247c323c24f2fbcc34bcdd"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"layers"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"mediaType"</span>: <span class="string">"application/vnd.docker.image.rootfs.diff.tar.gzip"</span>,</span><br><span class="line">      <span class="string">"size"</span>: 81522888,</span><br><span class="line">      <span class="string">"digest"</span>: <span class="string">"sha256:8dfe9326f733b815c486432e93e0a97f03e90e7cc35def9511cd1efa7f917f56"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># æ ¹æ® dir ç›®å½•ä¸­çš„ manifest æŸ¥çœ‹å®¹å™¨é•œåƒåŠå„é•œåƒå±‚ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">$ jq <span class="string">'.'</span> nexus3-3.37.3/1e1d45f195b19d03ec1833561dca6f5c63f9453413247c323c24f2fbcc34bcdd</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"architecture"</span>: <span class="string">"amd64"</span>,</span><br><span class="line">  <span class="string">"config"</span>: &#123;</span><br><span class="line">    <span class="string">"Hostname"</span>: <span class="string">"bb4a731bd39e"</span>,</span><br><span class="line">    <span class="string">"Domainname"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"User"</span>: <span class="string">"nexus"</span>,</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">"ExposedPorts"</span>: &#123;</span><br><span class="line">      <span class="string">"8081/tcp"</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"Tty"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"OpenStdin"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"StdinOnce"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"Env"</span>: [</span><br><span class="line">      <span class="string">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span>,</span><br><span class="line">      <span class="string">"container=oci"</span>,</span><br><span class="line">      <span class="string">"SONATYPE_DIR=/opt/sonatype"</span>,</span><br><span class="line">      <span class="string">"NEXUS_HOME=/opt/sonatype/nexus"</span>,</span><br><span class="line">      <span class="string">"NEXUS_DATA=/nexus-data"</span>,</span><br><span class="line">      <span class="string">"NEXUS_CONTEXT="</span>,</span><br><span class="line">      <span class="string">"SONATYPE_WORK=/opt/sonatype/sonatype-work"</span>,</span><br><span class="line">      <span class="string">"DOCKER_TYPE=3x-docker"</span>,</span><br><span class="line">      <span class="string">"INSTALL4J_ADD_VM_PARAMS=-Xms2703m -Xmx2703m -XX:MaxDirectMemorySize=2703m -Djava.util.prefs.userRoot=/nexus-data/javaprefs"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Cmd"</span>: [</span><br><span class="line">      <span class="string">"sh"</span>,</span><br><span class="line">      <span class="string">"-c"</span>,</span><br><span class="line">      <span class="string">"<span class="variable">$&#123;SONATYPE_DIR&#125;</span>/start-nexus-repository-manager.sh"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Image"</span>: <span class="string">"sha256:bb968737b5d0d7420e5af7c5524cddc16bd2b43a47f8277e00b1461342d40ba5"</span>,</span><br><span class="line">    <span class="string">"Volumes"</span>: &#123;</span><br><span class="line">      <span class="string">"/nexus-data"</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  ...</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"created"</span>: <span class="string">"2022-03-02T23:52:49.682473465Z"</span>,</span><br><span class="line">  <span class="string">"docker_version"</span>: <span class="string">"20.10.9"</span>,</span><br><span class="line">  <span class="string">"history"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"created"</span>: <span class="string">"2022-02-25T17:39:29.754401796Z"</span>,</span><br><span class="line">      <span class="string">"comment"</span>: <span class="string">"Imported from -"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"created"</span>: <span class="string">"2022-03-02T23:52:49.682473465Z"</span>,</span><br><span class="line">      <span class="string">"created_by"</span>: <span class="string">"/bin/sh -c #(nop)  CMD [\"sh\" \"-c\" \"<span class="variable">$&#123;SONATYPE_DIR&#125;</span>/start-nexus-repository-manager.sh\"]"</span>,</span><br><span class="line">      <span class="string">"empty_layer"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"os"</span>: <span class="string">"linux"</span>,</span><br><span class="line">  <span class="string">"rootfs"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"layers"</span>,</span><br><span class="line">    <span class="string">"diff_ids"</span>: [</span><br><span class="line">      <span class="string">"sha256:7699752e6ed63eef234d2736d4e37159a433e18e06cd617e254299f324f41797"</span>,</span><br><span class="line">      <span class="string">"sha256:c8013a2772b6673d9b750b6407d4ac4f525a47bb2a5b5bf09ba9bf8e10aea3fc"</span>,</span><br><span class="line">      <span class="string">"sha256:5a745ebef99f4893aac7c56a26e54f9c6cdc08b02748e0580b1a31d70be0a280"</span>,</span><br><span class="line">      <span class="string">"sha256:8d12fc82bf58bf5f7958577a148cc05899f0c19e4654376f5e01d3af46eb0c15"</span>,</span><br><span class="line">      <span class="string">"sha256:d17e45a4f748d13d0501b9e1bca5be387e13efa8ce98147a85c904a348764f3b"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># æ ¹æ®å®¹å™¨é•œåƒç›®å½•ä¸­çš„ config æ–‡ä»¶æŸ¥çœ‹å…·ä½“çš„ image config</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ skopeo inspect dir:nexus3-3.37.3</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ nexus3 å®¹å™¨é•œåƒçš„æ¦‚è¦ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">$ skopeo inspect --raw dir:nexus3-3.37.3</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ nexus3 å®¹å™¨é•œåƒçš„ manifest ä¿¡æ¯ï¼Œè¿”å›çš„å†…å®¹ä¸é•œåƒçš„ manifest.json ä¸€è‡´ã€‚</span></span><br><span class="line"></span><br><span class="line">$ skopeo inspect --config dir:nexus3-3.37.3</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ nexus3 å®¹å™¨é•œåƒçš„ config ä¿¡æ¯ï¼Œè¿”å›çš„å†…å®¹ä¸ç›´æ¥æŸ¥çœ‹é•œåƒçš„é…ç½®ä¿¡æ¯ä¸€è‡´ã€‚</span></span><br><span class="line"></span><br><span class="line">$ skopeo manifest-digest nexus3-3.37.3/manifest.json</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ nexus3 å®¹å™¨é•œåƒçš„ manifest.json æ–‡ä»¶çš„ digest å€¼</span></span><br></pre></td></tr></table></figure>
<p>å…³äºå®¹å™¨é•œåƒç›®å½•ä¸­ <code>image manifest</code> ä¸å…¶ <code>digest</code> çš„å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<img src="skopeo-docker-image-format-digest-1.jpg" alt="skopeo-docker-image-format-digest-1.jpg"><img src="skopeo-docker-image-format-digest-2.jpg" alt="skopeo-docker-image-format-digest-2.jpg"></p>
</li>
<li>ğŸ‘‰ ç¤ºä¾‹ 2ï¼šOCI é•œåƒæ ¼å¼çš„å®¹å™¨é•œåƒç›®å½•<br>å…³äºå®¹å™¨é•œåƒç›®å½•ä¸­ <code>image manifest</code> ä¸å…¶ <code>digest</code> çš„å…³ç³»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<img src="skopeo-oci-image-format-digest.jpg" alt="skopeo-oci-image-format-digest.jpg"></li>
</ul>
</li>
</ul>
<h3 id="ğŸ³-å®¹å™¨é•œåƒæ ¼å¼æ¯”è¾ƒï¼š"><a href="#ğŸ³-å®¹å™¨é•œåƒæ ¼å¼æ¯”è¾ƒï¼š" class="headerlink" title="ğŸ³ å®¹å™¨é•œåƒæ ¼å¼æ¯”è¾ƒï¼š"></a>ğŸ³ å®¹å™¨é•œåƒæ ¼å¼æ¯”è¾ƒï¼š</h3><ul>
<li>å¯¹äºä¸åŒçš„å®¹å™¨é•œåƒæ ¼å¼ï¼Œå…¶ç›®å½•çš„ç»„ç»‡ç»“æ„å­˜åœ¨å·®å¼‚ï¼Œä½†å½¼æ­¤é—´åˆæœ‰è”ç³»ã€‚</li>
<li>ç›®å‰é‡‡ç”¨çš„å®¹å™¨é•œåƒæ ¼å¼ï¼š  <ul>
<li><code>Docker image format</code>ï¼šDocker é•œåƒæ ¼å¼  </li>
<li><code>OCI image format</code>ï¼šOCI é•œåƒæ ¼å¼</li>
</ul>
</li>
<li>OCI image format ç»§æ‰¿äº Docker image formatï¼Œå› æ­¤ï¼Œå¯è¿è¡Œ OCI image format é•œåƒçš„å®¹å™¨è¿è¡Œæ—¶ä¹Ÿå¯è¿è¡Œ Docker image format çš„é•œåƒã€‚</li>
<li><code>OCI</code>ï¼ˆOpen Container Initiativeï¼Œå¼€æ”¾å®¹å™¨æ ‡å‡†ï¼‰å‘å±•æ¦‚è¿°ï¼š<ul>
<li>ä¸ºäº†æ¨è¿›å®¹å™¨åŒ–æŠ€æœ¯çš„å·¥ä¸šæ ‡å‡†åŒ–ï¼Œ2015 å¹´ 6 æœˆåœ¨ <code>DockerCon</code> ä¸Š Linux åŸºé‡‘ä¼šä¸ Googleã€åä¸ºã€æƒ æ™®ã€IBMã€Dockerã€Red Hatã€VMware ç­‰å…¬å¸å…±åŒå®£å¸ƒæˆç«‹å¼€æ”¾å®¹å™¨é¡¹ç›®ï¼ˆOCPï¼‰ï¼Œåæ›´åä¸ºå¼€æ”¾å®¹å™¨æ ‡å‡†ï¼ˆOCIï¼‰ã€‚  </li>
<li>å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯å»ºç«‹å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶çš„å·¥ä¸šå¼€æ”¾é€šç”¨æ ‡å‡†ã€‚  </li>
<li>ä¸ºäº†æ”¯æŒ OCI å®¹å™¨è¿è¡Œæ—¶æ ‡å‡†çš„æ¨è¿›ï¼ŒDocker å…¬å¸èµ·è‰äº†é•œåƒæ ¼å¼å’Œè¿è¡Œæ—¶è§„èŒƒçš„è‰æ¡ˆï¼Œå¹¶å°† Docker é¡¹ç›®çš„ç›¸å…³å®ç°æçŒ®ç»™äº†ç¤¾åŒºï¼ŒOCI ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶çš„åŸºç¡€å®ç°ï¼Œç°åœ¨é¡¹ç›®åä¸º <code>runc</code>ã€‚</li>
</ul>
</li>
<li>ğŸ¤˜ å‘å±•è‡³ä»Šï¼ŒOCI åˆ¶å®šçš„ä¸»è¦æ ‡å‡†ï¼š  <ul>
<li><code>runtime-spec</code>ï¼šå®šä¹‰å®¹å™¨è¿è¡Œæ—¶è§„èŒƒ  </li>
<li><code>image-spec</code>ï¼šå®šä¹‰å®¹å™¨é•œåƒæ ¼å¼è§„èŒƒ  </li>
<li><code>distribution-spec</code>ï¼šå®šä¹‰å®¹å™¨é•œåƒçš„åˆ†å‘è§„èŒƒ</li>
</ul>
</li>
<li><p>OCI image format ç›®å½•è¯´æ˜ï¼š  </p>
<ul>
<li><p>å¦‚ä¸‹æ‰€ç¤ºï¼Œä»¥ <code>debian</code> é•œåƒä¸ºä¾‹ï¼š    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree debian-bullseye-20211115-oci</span><br><span class="line">debian-bullseye-20211115-oci</span><br><span class="line">â”œâ”€â”€ blobs</span><br><span class="line">â”‚   â””â”€â”€ sha256</span><br><span class="line">â”‚       â”œâ”€â”€ 468a9be7b68d9b0baf252c3496a6db0a406ba558946d3cfee8f0d2a3be1ec42b</span><br><span class="line">â”‚       â”œâ”€â”€ 5f2f9939c1839f4fee492777a220cfe1e80cd25008df90af6c2b3b2c30e239c6</span><br><span class="line">â”‚       â””â”€â”€ 61ccfad6b52ee974d14b8e3c998d862e7dedd59fa8e0023e6620b213ea6da1ad</span><br><span class="line">â”œâ”€â”€ index.json</span><br><span class="line">â””â”€â”€ oci-layout</span><br></pre></td></tr></table></figure>
</li>
<li><p>oci-layoutï¼šOCI image çš„é•œåƒå¸ƒå±€è§„èŒƒï¼Œæ­¤å¤„ä½¿ç”¨ <code>OCI 1.0.0</code> ç‰ˆæœ¬ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ jq <span class="string">'.'</span> debian-bullseye-20211115-oci/oci-layout</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"imageLayoutVersion"</span>: <span class="string">"1.0.0"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>index.jsonï¼š    </p>
<ul>
<li><code>index.json</code> æ–‡ä»¶ä¸­çš„ <code>manifests</code> å­—æ®µç±»ä¼¼äº Docker image ä¸­çš„ <code>manifest.json</code> ä½œä¸º OCI image çš„é¡¶çº§é…ç½®, ä¹Ÿæ˜¯é•œåƒçš„ä¸€ä¸ªå…¥å£é…ç½®ã€‚  </li>
<li><p>è¯¥æ–‡ä»¶å®é™…æŒ‡å‘ <code>blobs/sha256/468a9be7b68d9b0baf252c3496a6db0a406ba558946d3cfee8f0d2a3be1ec42b</code> ï¼Œå³çœŸæ­£çš„ OCI image manifest æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ jq <span class="string">'.'</span> debian-bullseye-20211115-oci/index.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"schemaVersion"</span>: 2,</span><br><span class="line">  <span class="string">"manifests"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"mediaType"</span>: <span class="string">"application/vnd.oci.image.manifest.v1+json"</span>,</span><br><span class="line">      <span class="string">"digest"</span>: <span class="string">"sha256:468a9be7b68d9b0baf252c3496a6db0a406ba558946d3cfee8f0d2a3be1ec42b"</span>,</span><br><span class="line">      <span class="string">"size"</span>: 349</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»è¯¥æ–‡ä»¶çš„ <code>mediaType</code> å¯ä»¥çœ‹å‡ºå®¹å™¨é•œåƒæ ¼å¼å·²å‘ç”Ÿçš„å˜åŒ–ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jq <span class="string">'.mediaType'</span> debian-bullseye-20211115-docker/manifest.json</span><br><span class="line"><span class="string">"application/vnd.docker.distribution.manifest.v2+json"</span></span><br><span class="line"><span class="comment"># Docker image format å°è£…</span></span><br><span class="line"></span><br><span class="line">$ jq <span class="string">'.manifests[0].mediaType'</span> debian-bullseye-20211115-oci/index.json</span><br><span class="line"><span class="string">"application/vnd.oci.image.manifest.v1+json"</span></span><br><span class="line"><span class="comment"># OCI image format å°è£…</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ jq <span class="string">'.'</span> debian-bullseye-20211115-oci/blobs/sha256/468a9be7b68d9b0baf252c3496a6db0a406ba558946d3cfee8f0d2a3be1ec42b</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"schemaVersion"</span>: 2,</span><br><span class="line">  <span class="string">"config"</span>: &#123;</span><br><span class="line">    <span class="string">"mediaType"</span>: <span class="string">"application/vnd.oci.image.config.v1+json"</span>,</span><br><span class="line">    <span class="string">"digest"</span>: <span class="string">"sha256:61ccfad6b52ee974d14b8e3c998d862e7dedd59fa8e0023e6620b213ea6da1ad"</span>,</span><br><span class="line">    <span class="string">"size"</span>: 579</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"layers"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"mediaType"</span>: <span class="string">"application/vnd.oci.image.layer.v1.tar+gzip"</span>,</span><br><span class="line">      <span class="string">"digest"</span>: <span class="string">"sha256:5f2f9939c1839f4fee492777a220cfe1e80cd25008df90af6c2b3b2c30e239c6"</span>,</span><br><span class="line">      <span class="string">"size"</span>: 56889206</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ–‡ä»¶ä¸º OCI image manifest æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å« image config çš„ä¿¡æ¯ä¸å„é•œåƒå±‚ Layers çš„ä¿¡æ¯ï¼Œæ¯å±‚ layer ä½¿ç”¨ <code>tar+gzip</code> çš„æ–¹å¼è¿›è¡Œå‹ç¼©ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
<li>Docker image format ä¸ OCI image format çš„è”ç³»ä¸åŒºåˆ«ï¼š  <ul>
<li>æœ€ä¸»è¦çš„åŒºåˆ«ï¼šç›®å½•ç»“æ„ä¸å®Œå…¨ç›¸åŒï¼Œé…ç½®ä¿¡æ¯å°¤å…¶æ˜¯ <code>mediaType</code> çš„è§„èŒƒä¸åŒã€‚  </li>
<li>è”ç³»ï¼šOCI image çš„è§„èŒƒæ˜¯ç”± Docker image çš„è§„èŒƒä¿®æ”¹è€Œæ¥ï¼Œæ‰€ä»¥ç±»ä¼¼å®ƒä»¬çš„ blob çš„ç»„ç»‡å½¢å¼å¤§è‡´ç›¸åŒï¼Œé…ç½®æ–‡ä»¶ä¸­å¾ˆå¤šçš„å‚æ•°ä¹Ÿç›¸ä¼¼ã€‚  </li>
<li>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨ skopeo å·¥å…·å¾ˆæ–¹ä¾¿åœ°å°† Docker image è½¬æ¢ä¸º OCI imageã€‚</li>
</ul>
</li>
</ul>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><ul>
<li><a href="https://github.com/containers/skopeo" target="_blank" rel="noopener">GitHub Doc - Skopeo</a></li>
<li><a href="https://mp.weixin.qq.com/s/J2b-PQD5GkN5KEmGB2WAeA" target="_blank" rel="noopener">é•œåƒæ¬è¿å·¥å…· Skopeo ä½¿ç”¨</a></li>
<li><a href="https://mp.weixin.qq.com/s/8wAv87DkJjE6fVEEmoQ60Q" target="_blank" rel="noopener">OCI ä¸å®¹å™¨é•œåƒæ„å»º</a></li>
<li><a href="https://github.com/opencontainers/image-spec" target="_blank" rel="noopener">GitHub Doc - opencontainers/image-spec</a></li>
<li><a href="https://github.com/opencontainers/image-spec/blob/main/media-types.md" target="_blank" rel="noopener">GitHub Doc - OCI Image Media Types</a></li>
<li><a href="https://github.com/opencontainers/runtime-spec/blob/main/spec.md" target="_blank" rel="noopener">GitHub Doc - Open Container Initiative Runtime Specification</a></li>
</ul>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2022/12/19/rocketchat-mongodb-on-k8s/" data-toggle="tooltip" data-placement="top" title="Kubernetes ä¸­éƒ¨ç½² Rocket.Chat ä¸ MongoDB å®æ—¶äº¤æµå¹³å°">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2022/12/05/golang-code-server/" data-toggle="tooltip" data-placement="top" title="Code Server v4.8.3 å®¹å™¨é•œåƒæ„å»º">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#äº‘åŸç”Ÿ" title="äº‘åŸç”Ÿ">äº‘åŸç”Ÿ</a>
                        
                          <a class="tag" href="/tags/#å®¹å™¨" title="å®¹å™¨">å®¹å™¨</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://github.com/Alberthua-Perl" target="_blank">Alberthua</a></li>
                    
                        <li><a href="https://github.com/xwanli0923" target="_blank">xwanli0923</a></li>
                    
                        <li><a href="https://github.com/rowheel" target="_blank">rowheel</a></li>
                    
                </ul>
                
            </div>

        </div>
    </div>
</article>









    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/Alberthua-Perl">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Alberthua Blog 2022 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://alberthua-perl.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="https://alberthua-perl.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
